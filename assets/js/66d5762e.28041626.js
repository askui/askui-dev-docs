"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[29884],{76704:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var o=t(17624),i=t(4552);t(86212),t(22440);const r={sidebar_position:2},s="Automating Multiple Devices",a={id:"general/Executing Automations/multi-device-automation",title:"Automating Multiple Devices",description:"This tutorial shows how to automate multiple devices on the same network by using AskUI. After following this page, you will be able to automate more than one device across different platforms, whether Linux, macOS, Windows or Android.",source:"@site/versioned_docs/version-0.20.7/general/04-Executing Automations/multi-device-automation.md",sourceDirName:"general/04-Executing Automations",slug:"/general/Executing Automations/multi-device-automation",permalink:"/docs/0.20.7/general/Executing Automations/multi-device-automation",draft:!1,unlisted:!1,editUrl:"https://pr.new/askui/askui-dev-docs",tags:[],version:"0.20.7",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docsSidebar",previous:{title:"Automating Mobile Devices",permalink:"/docs/0.20.7/general/Executing Automations/mobile-automation"},next:{title:"Condition-Based Execution",permalink:"/docs/0.20.7/general/Element Selection/condition-based-execution"}},l={},c=[{value:"Automate Remote Devices Running on Windows, Linux or macOS",id:"automate-remote-devices-running-on-windows-linux-or-macos",level:2},{value:"1. Run the AskUI Controller for Each Device",id:"1-run-the-askui-controller-for-each-device",level:3},{value:"2. Configure the <code>helpers/askui-helper.ts</code>",id:"2-configure-the-helpersaskui-helperts",level:3},{value:"Automate Remote Device(s) Running on Android",id:"automate-remote-devices-running-on-android",level:2},{value:"1. Prepare Your Android Device(s)",id:"1-prepare-your-android-devices",level:3},{value:"2. Start AskUI Controller for Each Device",id:"2-start-askui-controller-for-each-device",level:3},{value:"3. Configure the <code>helpers/askui-helper.ts</code>",id:"3-configure-the-helpersaskui-helperts",level:3},{value:"Write the AskUI Code",id:"write-the-askui-code",level:2},{value:"Run the Code",id:"run-the-code",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,i.M)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"automating-multiple-devices",children:"Automating Multiple Devices"})}),"\n",(0,o.jsx)(n.p,{children:"This tutorial shows how to automate multiple devices on the same network by using AskUI. After following this page, you will be able to automate more than one device across different platforms, whether Linux, macOS, Windows or Android."}),"\n",(0,o.jsxs)(n.p,{children:["\ud83d\udccc ",(0,o.jsxs)(n.em,{children:["The following tutorial assumes that you have already installed and set up the AskUI library on your local device. The code for the configuration is based on the generated code. See ",(0,o.jsx)(n.a,{href:"/docs/0.20.7/general/Getting%20Started/write-your-first-instruction",children:"Getting Started"})," for more details."]})]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"multi-device-automation",src:t(97556).c+"",width:"1280",height:"882"})}),"\n",(0,o.jsx)(n.h2,{id:"automate-remote-devices-running-on-windows-linux-or-macos",children:"Automate Remote Devices Running on Windows, Linux or macOS"}),"\n",(0,o.jsx)(n.h3,{id:"1-run-the-askui-controller-for-each-device",children:"1. Run the AskUI Controller for Each Device"}),"\n",(0,o.jsxs)(n.p,{children:["Run the following command to start the ",(0,o.jsx)(n.em,{children:"AskUI Controller"})," for your local device on port 6769:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# DisplayNum specifies the display the AskUI Controller is controlling\n# If you have more than 1 display you have to change accordingly (0 main display)\n# The AskUI Controller renders a white border overlay around the controlled display\nAskUI-StartController -DisplayNum 0 -RunInBackground -Port 6769\n"})}),"\n",(0,o.jsx)(n.p,{children:"If running successfully, you should see the logs printed on the terminal, for example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"[2024-10-07 14:04:25.663 +0200] INFO (AskUI Controller): Selecting display number '1'.\n[2024-10-07 14:04:25.665 +0200] INFO (AskUI Controller): Successfully started.\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"2-configure-the-helpersaskui-helperts",children:["2. Configure the ",(0,o.jsx)(n.code,{children:"helpers/askui-helper.ts"})]}),"\n",(0,o.jsxs)(n.p,{children:["For a remote device you can use the ",(0,o.jsx)(n.a,{href:"/docs/0.20.7/suite/Components/silent-unix-installer",children:"Silent Installer option of the installer (Only Linux and macOS)"}),". After the installation you have to first start the AskUI controller and then find out the IP of the remote device. You need it for connecting to the AskUI Controller from your local device:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Windows only\nipconfig /all\n\n# macOS only\nipconfig getifaddr en0\n\n# Linux only\nhostname -I\n"})}),"\n",(0,o.jsxs)(n.p,{children:["And then change the ",(0,o.jsx)(n.code,{children:"<ip-address-remote-device*>"})," in the ",(0,o.jsx)(n.code,{children:"helpers/askui-helper.ts"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:'import { UiControlClient, UiController } from \'askui\';\n\nlet remoteDevice1: UiControlClient;\nlet remoteDevice2: UiControlClient;\n\njest.setTimeout(60 * 1000 * 60);\n\nbeforeAll(async () => {\n\n    // This client will communicate with\n    // the controller running on the remote device 1.\n    // Replace the <ip-address-remote-device1>\n    // with the IP from remote device 1\n    remoteDevice1 = await UiControlClient.build({ \n        uiControllerUrl: "ws://<ip-address-remote-device2>:6769",\n    });\n\n    await remoteDevice1.connect();\n\n    // This client will communicate with\n    // the controller running on the remote device 2.\n    // Replace the <ip-address-remote-device2>\n    // with the IP from remote device 2\n    remoteDevice2 = await UiControlClient.build({    \n        uiControllerUrl: "ws://<ip-address-remote-device2>:6769",\n    });\n\n    await remoteDevice2.connect();\n\n    // Add more UiControlClients for more devices\n});\n\nafterAll(async () => {\n    remoteDevice1.disconnect();\n    remoteDevice2.disconnect();\n\n    // Do not forget:\n    // Add disconnect for additional UIControlClients\n});\n\nexport { remoteDevice1, remoteDevice2 };\n'})}),"\n",(0,o.jsx)(n.h2,{id:"automate-remote-devices-running-on-android",children:"Automate Remote Device(s) Running on Android"}),"\n",(0,o.jsxs)(n.admonition,{type:"info",children:[(0,o.jsxs)(n.p,{children:["Automating a remote Android device works differently than automating a Windows, Linux or macOS remote device.\nYour local machine communicates with the remote Android device over the ",(0,o.jsx)(n.em,{children:"Android Debug Bridge"}),"."]}),(0,o.jsxs)(n.p,{children:["Thus the AskUI Controller runs on your local machine and ",(0,o.jsx)(n.strong,{children:"not"})," on the remote Android device!"]})]}),"\n",(0,o.jsxs)(n.p,{children:["Also ",(0,o.jsx)(n.a,{href:"https://github.com/askui/askui-example-android-multi-device",children:"check out our example repository"})," to see the setup in action \ud83d\ude42."]}),"\n",(0,o.jsx)(n.h3,{id:"1-prepare-your-android-devices",children:"1. Prepare Your Android Device(s)"}),"\n",(0,o.jsxs)(n.p,{children:["Prepare your remote Android device(s) with ",(0,o.jsx)(n.a,{href:"/docs/0.20.7/general/Executing%20Automations/mobile-automation#android",children:"this tutorial"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Use the commands below, if you want to connect an Android device via ",(0,o.jsx)(n.code,{children:"adb"})," wirelessly:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Connect the Android device with a\n# USB cable, and run this command:\n\n# Run this command to confirm that your\n# Android device is discoverable\nadb devices # will print the <device-id>\n\n# Replace <device-id> with your device-id\n# This sets the port the adb is listening\n# on for commands.\n#\n# IMPORTANT:\n# Set this to a different port for each device\n# you connect!\nadb -s <device-id> tcpip 9000\n\n# Replace the <local-ip-address>\n# In this example localhost: 127.0.0.1\nadb -s <device-id> connect <local-ip-address>:9000\n\n# Run this command, if you want to check the local\n# ip address of the android device\nadb -s <device-id> shell ip -f inet addr show wlan0\n\n# Now you can disconnect the USB cable from the Android device.\n# Confirm that the Android device is recognised by adb wirelessly.\nadb devices\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-start-askui-controller-for-each-device",children:"2. Start AskUI Controller for Each Device"}),"\n",(0,o.jsxs)(n.p,{children:["You ",(0,o.jsx)(n.strong,{children:"must"})," start a separate AskUI Controller for each Android device you are automating. The ",(0,o.jsx)(n.code,{children:"-Port"})," argument sets the port the AskUI Controller is listening on for commands. Choose a different one for each device."]}),"\n",(0,o.jsxs)(n.admonition,{type:"tip",children:[(0,o.jsxs)(n.p,{children:["Run ",(0,o.jsx)(n.code,{children:"adb devices"})," in a terminal to get a list of connected devices and their device ids."]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"$ adb devices\nemulator-1 device product:sdk_google_phone_x86_64 model:Android_SDK_built_for_x86_64 device:generic_x86_64\nemulator-2 device product:sdk_google_phone_x86 model:Android_SDK_built_for_x86 device:generic_x86\n"})})]}),"\n",(0,o.jsxs)(n.p,{children:["Set a different port for each AskUI Controller and specify which Android device to connect to with the ",(0,o.jsx)(n.code,{children:"-d"})," flag."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Activate AskUI Development Environment (ADE) first\n# Connects to the first device returned by 'adb devices'\nAskUI-StartController -Runtime android -RunInBackground -Port 6769 -DeviceId \"<your-device-id-1>\"\n\n# Connects to the second device returned by 'adb devices'\nAskUI-StartController -Runtime android -RunInBackground -Port 6770 -DeviceId \"<your-device-id-2>\"\n"})}),"\n",(0,o.jsxs)(n.h3,{id:"3-configure-the-helpersaskui-helperts",children:["3. Configure the ",(0,o.jsx)(n.code,{children:"helpers/askui-helper.ts"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:'import { UiControlClient } from \'askui\';\n\n// Client is necessary to use the askui API\nlet auiAndroidDevice1: UiControlClient;\nlet auiAndroidDevice2: UiControlClient;\n\njest.setTimeout(60 * 1000 * 60);\n\nbeforeAll(async () => {\n\n  // Connects to AskUI Controller 1 (emulator-1)\n  remoteDevice1 = await UiControlClient.build({\n    uiControllerUrl: "ws://127.0.0.1:6769",\n  });\n  await remoteDevice1.connect();\n  \n  // Connects to AskUI Controller 2 (emulator-2)\n  remoteDevice2 = await UiControlClient.build({\n    uiControllerUrl: "ws://127.0.0.1:6770",\n  });\n  \n  await remoteDevice2.connect();\n});\n\n...\n\nafterAll(async () => {\n  remoteDevice1.disconnect();\n  remoteDevice2.disconnect();\n});\n\nexport { remoteDevice1, remoteDevice2 };\n'})}),"\n",(0,o.jsx)(n.h2,{id:"write-the-askui-code",children:"Write the AskUI Code"}),"\n",(0,o.jsxs)(n.p,{children:["Write the AskUI code in ",(0,o.jsx)(n.code,{children:"test/my-first-askui-test-suite.test.ts"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { remoteDevice1, remoteDevice2 } from './helper/jest.setup';\n\ndescribe('jest with askui', () => {\n    it('should work with multiple devices', async () => {\n        const everyElementRemote1 = await remoteDevice1.getAll().exec();\n        console.log(everyElementRemote1);\n\n        await localDevice.moveMouse(500,500).exec();\n        const everyElementRemote2 = await remoteDevice2.getAll().exec();\n        console.log(everyElementRemote2);\n    });\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"run-the-code",children:"Run the Code"}),"\n",(0,o.jsx)(n.p,{children:"Run the command below to run the AskUI code:"}),"\n",(0,o.jsxs)(n.p,{children:["Switch into ADE by running ",(0,o.jsx)(n.code,{children:"askui-shell"})," in a command prompt first."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-powershell",children:"AskUI-RunProject\n"})}),"\n",(0,o.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,o.jsxs)(n.p,{children:["Now you should be able to automate multiple devices in the network. If you got any issues while following this tutorial, don't hesitate to ask our ",(0,o.jsx)(n.a,{href:"https://community.askui.com/forums/home",children:"Outverse-Community"}),"!"]})]})}function u(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},22440:(e,n,t)=>{t.d(n,{c:()=>s});t(11504);var o=t(65456);const i={tabItem:"tabItem_Ymn6"};var r=t(17624);function s(e){let{children:n,hidden:t,className:s}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,o.c)(i.tabItem,s),hidden:t,children:n})}},86212:(e,n,t)=>{t.d(n,{c:()=>j});var o=t(11504),i=t(65456),r=t(77288),s=t(55592),a=t(83472),l=t(95068),c=t(30604),d=t(3244);function u(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:o,default:i}}=e;return{value:n,label:t,attributes:o,default:i}}))}(t);return function(e){const n=(0,c.wn)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:t}=e;const i=(0,s.Uz)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l._M)(r),(0,o.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(i.location.search);n.set(r,e),i.replace({...i.location,search:n.toString()})}),[r,i])]}function v(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,r=h(e),[s,l]=(0,o.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const o=t.find((e=>e.default))??t[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:n,tabValues:r}))),[c,u]=p({queryString:t,groupId:i}),[v,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,r]=(0,d.IN)(t);return[i,(0,o.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:i}),g=(()=>{const e=c??v;return m({value:e,tabValues:r})?e:null})();(0,a.c)((()=>{g&&l(g)}),[g]);return{selectedValue:s,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),f(e)}),[u,f,r]),tabValues:r}}var f=t(89788);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(17624);function b(e){let{className:n,block:t,selectedValue:o,selectValue:s,tabValues:a}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,r.MV)(),d=e=>{const n=e.currentTarget,t=l.indexOf(n),i=a[t].value;i!==o&&(c(n),s(i))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.c)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:r}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:o===n?0:-1,"aria-selected":o===n,ref:e=>l.push(e),onKeyDown:u,onClick:d,...r,className:(0,i.c)("tabs__item",g.tabItem,r?.className,{"tabs__item--active":o===n}),children:t??n},n)}))})}function w(e){let{lazy:n,children:t,selectedValue:r}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===r));return e?(0,o.cloneElement)(e,{className:(0,i.c)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function y(e){const n=v(e);return(0,x.jsxs)("div",{className:(0,i.c)("tabs-container",g.tabList),children:[(0,x.jsx)(b,{...n,...e}),(0,x.jsx)(w,{...n,...e})]})}function j(e){const n=(0,f.c)();return(0,x.jsx)(y,{...e,children:u(e.children)},String(n))}},97556:(e,n,t)=>{t.d(n,{c:()=>o});const o=t.p+"assets/images/multi-device-diagram-7c1be1770bde1ca3f564d30461460510.png"},4552:(e,n,t)=>{t.d(n,{I:()=>a,M:()=>s});var o=t(11504);const i={},r=o.createContext(i);function s(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);